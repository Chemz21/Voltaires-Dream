highest_monarch_skill_effect = {
	if = {
		limit = {
			OR = {
				ADM = 3
				DIP = 3
				MIL = 3
			}
		}
		export_to_variable = {
			variable_name = rulerAdmVar
			value = trigger_value:ADM
		}
		export_to_variable = {
			variable_name = rulerDipVar
			value = trigger_value:DIP
		}
		export_to_variable = {
			variable_name = rulerMilVar
			value = trigger_value:MIL
		}
		random_list = {
			33 = {
				trigger = {
					check_variable = {
						which = rulerAdmVar
						which = rulerDipVar
					}
					check_variable = {
						which = rulerAdmVar
						which = rulerMilVar
					}
				}
				set_ruler_flag = adm_highest
			}
			33 = {
				trigger = {
					check_variable = {
						which = rulerDipVar
						which = rulerAdmVar
					}
					check_variable = {
						which = rulerDipVar
						which = rulerMilVar
					}
				}
				set_ruler_flag = dip_highest
			}
			33 = {
				trigger = {
					check_variable = {
						which = rulerMilVar
						which = rulerAdmVar
					}
					check_variable = {
						which = rulerMilVar
						which = rulerDipVar
					}
				}
				set_ruler_flag = mil_highest
			}
		}
	}
}

#Holy Oders
add_estate_holy_orders_loyalty_effect = {
	if = {
		limit = {
			has_estate = estate_holy_orders
		}
		add_estate_loyalty = {
			estate = estate_holy_orders
			loyalty = 10
		}
	}
}

reduce_estate_holy_orders_loyalty_effect = {
	if = {
		limit = {
			has_estate = estate_holy_orders
		}
		add_estate_loyalty = {
			estate = estate_holy_orders
			loyalty = -10
		}
	}
}

#Mamluks
add_estate_mamluks_loyalty_effect = {
	if = {
		limit = {
			has_estate = estate_mamluks
		}
		add_estate_loyalty = {
			estate = estate_mamluks
			loyalty = 10
		}
	}
}

reduce_estate_mamluks_loyalty_effect = {
	if = {
		limit = {
			has_estate = estate_mamluks
		}
		add_estate_loyalty = {
			estate = estate_mamluks
			loyalty = -10
		}
	}
}

#Inversely scales reform desire with # of catholic tags.
add_reform_desire_effect = {
	if = {
		limit = {
			is_institution_enabled = laytheology
		}
		hidden_effect = {
			REB = {
				ROOT = {
					change_variable = {
						which = num_of_tags_catholic
						which = PREV
					}
				}
			}
			set_variable = {
				which = reform_desire_gain
				value = $base_reform_desire$
			}
			multiply_variable = {
				which = reform_desire_gain
				value = 100
			}
			if = {
				limit = {
					check_variable = {
						which = num_of_tags_catholic
						value = 100
					}
				}
				divide_variable = {
					which = reform_desire_gain
					which = num_of_tags_catholic
				}
			}
			else = {
				divide_variable = {
					which = reform_desire_gain
					value = 100
				}
			}
			if = {
				limit = {
					is_institution_enabled = laytheology
				}
				divide_variable = {
					which = reform_desire_gain
					value = 2
				}
			}
			while = {
				limit = {
					check_variable = {
						which = reform_desire_gain
						value = 0.01
					}
				}
				add_reform_desire = 0.01
				subtract_variable = {
					which = reform_desire_gain
					value = 0.01
				}
			}
			while = {
				limit = {
					check_variable = {
						which = reform_desire_gain
						value = 0.001
					}
				}
				add_reform_desire = 0.001
				subtract_variable = {
					which = reform_desire_gain
					value = 0.001
				}
			}
			set_variable = {
				which = reform_desire_gain
				value = 0
			}
			set_variable = {
				which = num_of_tags_catholic
				value = 0
			}
		}
	}
}

#Inversely scales reform desire with # of catholic tags.
remove_reform_desire_effect = {
	if = {
		limit = {
			is_institution_enabled = laytheology
		}
		hidden_effect = {
			REB = {
				ROOT = {
					change_variable = {
						which = num_of_tags_catholic
						which = PREV
					}
				}
			}
			set_variable = {
				which = reform_desire_gain
				value = $base_reform_desire$
			}
			multiply_variable = {
				which = reform_desire_gain
				value = 100
			}
			if = {
				limit = {
					check_variable = {
						which = num_of_tags_catholic
						value = 100
					}
				}
				divide_variable = {
					which = reform_desire_gain
					which = num_of_tags_catholic
				}
			}
			else = {
				divide_variable = {
					which = reform_desire_gain
					value = 100
				}
			}
			if = {
				limit = {
					is_institution_enabled = laytheology
				}
				divide_variable = {
					which = reform_desire_gain
					value = 2
				}
			}
			while = {
				limit = {
					NOT = {
						check_variable = {
							which = reform_desire_gain
							value = -0.01
						}
					}
				}
				add_reform_desire = -0.01
				change_variable = {
					which = reform_desire_gain
					value = 0.01
				}
			}
			while = {
				limit = {
					NOT = {
						check_variable = {
							which = reform_desire_gain
							value = -0.001
						}
					}
				}
				add_reform_desire = -0.001
				change_variable = {
					which = reform_desire_gain
					value = 0.001
				}
			}
			set_variable = {
				which = reform_desire_gain
				value = 0
			}
			set_variable = {
				which = num_of_tags_catholic
				value = 0
			}
		}
	}
}

#Number of Catholic tags
calc_catholic_tags = {
	REB = {
		set_variable = {
			which = num_of_tags_catholic
			value = 0
		}
		every_country = {
			limit = {
				religion = catholic
			}
			REB = {
				change_variable = {
					which = num_of_tags_catholic
					value = 1
				}
			}
		}
	}
}

#Should only be called by on_startup
init_centre_of_reformation = {
	if = {
		limit = {
			NOT = {
				is_year = 1600
			}
		}
		if = {
			limit = {
				4061 = {
					religion = cathar
				}
			}
			4061 = {
				add_reform_center = cathar
			}
		}
		if = {
			limit = {
				2433 = {
					religion = bogomilist
				}
				is_year = 1248
				NOT = {
					is_year = 1305
				}
			}
			2433 = {
				add_reform_center = bogomilist
			}
		}
		if = {
			limit = {
				1837 = {
					religion = fraticelli
				}
			}
			1837 = {
				add_reform_center = fraticelli
			}
		}
		if = {
			limit = {
				2272 = {
					religion = lollardy
				}
			}
			2272 = {
				add_reform_center = lollardy
			}
		}
		if = {
			limit = {
				541 = {
					religion = waldensian
				}
			}
			541 = {
				add_reform_center = waldensian
			}
		}
		if = {
			limit = {
				781 = {
					religion = hussite
				}
				NOT = {
					is_year = 1471
				}
			}
			781 = {
				add_reform_center = hussite
			}
		}
		if = {
			limit = {
				781 = {
					religion = protestant
				}
			}
			781 = {
				add_reform_center = protestant
			}
		}
		if = {
			limit = {
				59 = {
					religion = protestant
				}
			}
			59 = {
				add_reform_center = protestant
			}
		}
		if = {
			limit = {
				656 = {
					religion = protestant
				}
			}
			656 = {
				add_reform_center = protestant
			}
		}
		if = {
			limit = {
				2458 = {
					religion = protestant
				}
			}
			2458 = {
				add_reform_center = protestant
			}
		}
		if = {
			limit = {
				81 = {
					religion = protestant
				}
			}
			81 = {
				add_reform_center = protestant
			}
		}
		if = {
			limit = {
				2230 = {
					religion = protestant
				}
			}
			2230 = {
				add_reform_center = protestant
			}
		}
		if = {
			limit = {
				2467 = {
					religion = reformed
				}
			}
			2467 = {
				add_reform_center = reformed
			}
		}
		if = {
			limit = {
				2621 = {
					religion = reformed
				}
			}
			2621 = {
				add_reform_center = reformed
			}
		}
		if = {
			limit = {
				328 = {
					religion = reformed
				}
			}
			328 = {
				add_reform_center = reformed
			}
		}
		if = {
			limit = {
				1123 = {
					religion = reformed
				}
			}
			1123 = {
				add_reform_center = reformed
			}
		}
		if = {
			limit = {
				2359 = {
					religion = reformed
				}
			}
			2359 = {
				add_reform_center = reformed
			}
		}
	}
}

fragment_silesia_effect = {
	#OSW
	2945 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OSW
				}
			}
			add_core = OSW
		}
	}
	4914 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OSW
				}
			}
			add_core = OSW
		}
	}
	4913 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OSW
				}
			}
			add_core = OSW
		}
	}
	#CIE
	301 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = CIE
				}
			}
			add_core = CIE
		}
	}
	2908 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = CIE
				}
			}
			add_core = CIE
		}
	}
	4912 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = CIE
				}
			}
			add_core = CIE
		}
	}
	4911 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = CIE
				}
			}
			add_core = CIE
		}
	}
	#RCB
	815 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = RCB
				}
			}
			add_core = RCB
		}
	}
	2823 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = RCB
				}
			}
			add_core = RCB
		}
	}
	#BYT
	2825 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = BYT
				}
			}
			add_core = BYT
		}
	}
	4915 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = BYT
				}
			}
			add_core = BYT
		}
	}
	#OPO
	4919 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	2660 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	2943 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	2815 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	2663 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	4918 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	4919 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OPO
				}
			}
			add_core = OPO
		}
	}
	#NMY
	2826 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = NMY
				}
			}
			add_core = NMY
		}
	}
	812 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = NMY
				}
			}
			add_core = NMY
		}
	}
	#OLS
	2822 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OLS
				}
			}
			add_core = OLS
		}
	}
	816 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OLS
				}
			}
			add_core = OLS
		}
	}
	4908 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OLS
				}
			}
			add_core = OLS
		}
	}
	4905 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OLS
				}
			}
			add_core = OLS
		}
	}
	2821 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = OLS
				}
			}
			add_core = OLS
		}
	}
	#XBZ
	817 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = XBZ
				}
			}
			add_core = XBZ
		}
	}
	4901 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = XBZ
				}
			}
			add_core = XBZ
		}
	}
	4902 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = XBZ
				}
			}
			add_core = XBZ
		}
	}
	#NYS
	819 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = NYS
				}
			}
			add_core = NYS
		}
	}
	2414 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = NYS
				}
			}
			add_core = NYS
		}
	}
	#TRO
	820 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = TRO
				}
			}
			add_core = TRO
		}
	}
	2904 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = TRO
				}
			}
			add_core = TRO
		}
	}
	2905 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = TRO
				}
			}
			add_core = TRO
		}
	}
	5927 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = TRO
				}
			}
			add_core = TRO
		}
	}
	288 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = TRO
				}
			}
			add_core = TRO
		}
	}
	#ZIE
	818 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = ZIE
				}
			}
			add_core = ZIE
		}
	}
	#SNC
	2814 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = SNC
				}
			}
			add_core = SNC
		}
	}
	4903 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = SNC
				}
			}
			add_core = SNC
		}
	}
	4904 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = SNC
				}
			}
			add_core = SNC
		}
	}
	#JWR
	2817 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = JWR
				}
			}
			add_core = JWR
		}
	}
	4909 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = JWR
				}
			}
			add_core = JWR
		}
	}
	4906 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = JWR
				}
			}
			add_core = JWR
		}
	}
	#ZAG
	827 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = ZAG
				}
			}
			add_core = ZAG
		}
	}
	#LNN
	4907 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = LNN
				}
			}
			add_core = LNN
		}
	}
	826 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = LNN
				}
			}
			add_core = LNN
		}
	}
	#SCW
	813 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = SCW
				}
			}
			add_core = SCW
		}
	}
	#WRC
	822 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = WRC
				}
			}
			add_core = WRC
		}
	}
	4910 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = WRC
				}
			}
			add_core = WRC
		}
	}
	#GLG
	2664 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = GLG
				}
			}
			add_core = GLG
		}
	}
	4916 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = GLG
				}
			}
			add_core = GLG
		}
	}
	263 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = GLG
				}
			}
			add_core = GLG
		}
	}
	835 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = GLG
				}
			}
			add_core = GLG
		}
	}
	828 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = GLG
				}
			}
			add_core = GLG
		}
	}
	4917 = {
		if = {
			limit = {
				owned_by = ROOT
				NOT = {
					is_core = GLG
				}
			}
			add_core = GLG
		}
	}
}

add_religious_influence_effect_small = {
	if = {
		limit = {
			uses_papacy = yes
		}
		add_papal_influence = 10
	}
	if = {
		limit = {
			uses_church_aspects = yes
		}
		add_church_power = 25
	}
	if = {
		limit = {
			uses_fervor = yes
		}
		add_fervor = 10
	}
	if = {
		limit = {
			religion = orthodox
		}
		add_patriarch_authority = 0.05
	}
	if = {
		limit = {
			uses_piety = yes
		}
		if = {
			limit = {
				NOT = {
					piety = 0
				}
			}
			add_piety = -0.1
		}
		else = {
			add_piety = 0.1
		}
	}
	if = {
		limit = {
			religion = uatsdin
		}
		add_doom = -5
	}
	if = {
		limit = {
			religion = uatsdin
		}
		add_authority = -5
	}
}

add_religious_influence_effect_large = {
	if = {
		limit = {
			uses_papacy = yes
		}
		add_papal_influence = 25
	}
	if = {
		limit = {
			uses_church_aspects = yes
		}
		add_church_power = 50
	}
	if = {
		limit = {
			uses_fervor = yes
		}
		add_fervor = 25
	}
	if = {
		limit = {
			religion = orthodox
		}
		add_patriarch_authority = 0.1
	}
	if = {
		limit = {
			religion_group = muslim
		}
		if = {
			limit = {
				NOT = {
					piety = 0
				}
			}
			add_piety = -0.25
		}
		else = {
			add_piety = 0.25
		}
	}
	if = {
		limit = {
			religion = uatsdin
		}
		add_doom = -10
	}
	if = {
		limit = {
			religion = uatsdin
		}
		add_authority = 10
	}
}

anglicize_irish_tag_effect = {
	trigger_switch = {
		on_trigger = tag
		OSS = {
			override_country_name = OSSORY
		}
		OIE = {
			override_country_name = ORIEL
		}
		BRF = {
			override_country_name = BREFFNY
		}
		TRY = {
			override_country_name = TYRCONNELL
		}
		MCM = {
			override_country_name = MUNSTER
		}
		ORD = {
			override_country_name = ORMOND
		}
		MNS = {
			override_country_name = THOMOND
		}
		DMS = {
			override_country_name = DESMOND
		}
		#WXF
		ICN = {
			override_country_name = EAST_CONNACHT
		}
		ACN = {
			override_country_name = WEST_CONNACHT
		}
		UML = {
			override_country_name = MAYO
		}
		XKY = {
			override_country_name = KERRY
		}
		#WTY
		IAB = {
			override_country_name = WEST_BREFFNY
		}
		YBR = {
			override_country_name = LOUTH
		}
		SLN = {
			override_country_name = SLIGO
		}
		ULS = {
			override_country_name = ULSTER
		}
		TYR = {
			override_country_name = TYRONE
		}
		KID = {
			override_country_name = KILDARE
		}
		MTH = {
			override_country_name = MEATH
		}
		KEE = {
			override_country_name = KEENAGHT
		}
		FMA = {
			override_country_name = FERMANAGH
		}
		FLY = {
			override_country_name = OFFALY
		}
		UIS = {
			override_country_name = WESTMEATH
		}
		TBE = {
			override_country_name = ANNALY
		}
		BNA = {
			override_country_name = BALLINACOR
		}
		FWS = {
			override_country_name = FEWS
		}
		IVE = {
			override_country_name = IVEAGH
		}
		CBY = {
			override_country_name = ANTRIM
		}
		INH = {
			override_country_name = INISHOWEN
		}
		UMA = {
			override_country_name = HY_MANY
		}
		CCL = {
			override_country_name = BEAR
		}
		EIL = {
			override_country_name = ELY
		}
		CCU = {
			override_country_name = TULLA
		}
		GLN = {
			override_country_name = GALLEN
		}
		LEI = {
			override_country_name = LEINSTER
		}
		CBL = {
			override_country_name = CREBILLY
		}
		FCH = {
			override_country_name = TIRERAGH
		}
		LGO = {
			override_country_name = LEIX
		}
		MGL = {
			override_country_name = MOYLURG
		}
		UID = {
			override_country_name = ATHENRY
		}
		LRG = {
			override_country_name = LURG
		}
		FHM = {
			override_country_name = FERMOY
		}
		BEE = {
			override_country_name = BREGA
		}
		LCH = {
			override_country_name = LOGHER
		}
		CHB = {
			override_country_name = CARBERY
		}
		UIL = {
			override_country_name = MUSKERRY
		}
		BNN = {
			override_country_name = BURREN
		}
		UIB = {
			override_country_name = CARLOW
		}
		AIN = {
			override_country_name = BANAGH
		}
		TUC = {
			override_country_name = TULLYHOGUE
		}
		TYH = {
			override_country_name = TULLYHAW
		}
		LCN = {
			override_country_name = LECAN
		}
		CRK = {
			override_country_name = CORK
		}
		DBL = {
			override_country_name = DUBLIN
		}
		XDG = {
			override_country_name = DONEGAL
		}
		#CNN
	}
}

choose_possible_elector_effect = {
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 1
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 2
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 3
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 4
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 5
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 6
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 7
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 8
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
	random_country = {
		limit = {
			is_part_of_hre = yes
			num_of_cities = 5
			is_emperor = no
			is_elector = no
			is_subject = no
			is_excommunicated = no
			has_any_disaster = no
			is_bankrupt = no
			NOT = { government = republic }
			calc_true_if = {
				amount = 9
				prestige = 50
				legitimacy_equivalent = 90
				is_at_war = no
				has_regency = no
				culture_group = germanic
				diplomatic_reputation = 5
				in_golden_age = yes
				is_female = no
				ruler_total_stats = {
					stats = 14 
				}
			}
		}
		save_event_target_as = new_elector_$number$
	}
}

annex_canton_or_clear_flag_effect = {
	if = {
		limit = {
			any_country = {
				NOT = {
					tag = SWI
				}
				has_reform = canton_government
				capital_scope = {
					superregion = switzerland_superregion
				}
				is_free_or_tributary_trigger = yes
				ai = yes
			}
		}
		random_country = {
			limit = {
				NOT = {
					tag = SWI
				}
				has_reform = canton_government
				capital_scope = {
					superregion = switzerland_superregion
				}
				is_free_or_tributary_trigger = yes
				ai = yes
			}
			country_event = {
				id = hremodevents.11
				days = 1
			}
		}
	}
	else = {
		clr_global_flag = swi_formed_flag
	}
}

fragment_mongolia_effect = {
	#Great Horde
	lower_don_region = {
		limit = { owned_by = ROOT }
		add_core = GOL
		change_culture = mishary
	}
	khopyor_region = {
		limit = { owned_by = ROOT }
		add_core = GOL
		change_culture = mishary
	}
	sloboda_region = {
		limit = { owned_by = ROOT }
		add_core = GOL
		change_culture = mishary
	}
	#Crimea
	azov_region = {
		limit = { owned_by = ROOT }
		add_core = CRI
		change_culture = crimean
	}
	crimea_region = {
		limit = { owned_by = ROOT }
		add_core = CRI
		change_culture = crimean
	}
	wild_fields_region = {
		limit = { owned_by = ROOT }
		add_core = CRI
		change_culture = crimean
	}
	#Kazan
	kazan_region = {
		limit = { owned_by = ROOT }
		add_core = KAZ
		change_culture = kazani
	}
	mordovia_region = {
		limit = { owned_by = ROOT }
		add_core = KAZ
		change_culture = kazani
	}
	#Nogai
	bashkiria_region = {
		limit = { owned_by = ROOT }
		add_core = NOG
		change_culture = nogaybak
	}
	atyrau_area = {
		limit = { owned_by = ROOT }
		add_core = NOG
		change_culture = nogaybak
	}
	oral_area = {
		limit = { owned_by = ROOT }
		add_core = NOG
		change_culture = nogaybak
	}
	#Astrakhan
	lower_volga_region = {
		limit = { owned_by = ROOT }
		add_core = AST
		change_culture = astrakhani
	}
	kumykia_area = {
		limit = { owned_by = ROOT }
		add_core = AST
		change_culture = astrakhani
	}
	kabardia_area = {
		limit = { owned_by = ROOT }
		add_core = AST
		change_culture = astrakhani
	}
	#Jalarids
	lower_mesopotamia_region = {
		limit = { owned_by = ROOT }
		add_core = JYA
	}
	arabia_region = {
		limit = { owned_by = ROOT }
		add_core = JYA
	}
	dulaim_area = {
		limit = { owned_by = ROOT }
		add_core = JYA
	}
	shahrizor_area = {
		limit = { owned_by = ROOT }
		add_core = JYA
	}
	zab_area = {
		limit = { owned_by = ROOT }
		add_core = JYA
	}
	#Aq Qoyunlu
	sophene_region = {
		limit = { owned_by = ROOT }
		add_core = AKK
	}
	al_jazira_region = {
		limit = { owned_by = ROOT }
		add_core = AKK
	}
	#Qara Qoyunlu
	corduene_region = {
		limit = { owned_by = ROOT }
		add_core = QAR
	}
	armenia_region = {
		limit = { owned_by = ROOT }
		add_core = QAR
	}
	azerbaijan_region = {
		limit = { owned_by = ROOT }
		add_core = QAR
	}
	mosul_area = {
		limit = { owned_by = ROOT }
		add_core = QAR
	}
	zagros_area = {
		limit = { owned_by = ROOT }
		add_core = QAR
	}
}

change_mongol_culture_effect = {
	if = {
		limit = { is_core = GOL }
		change_culture = mishary
	}
	else_if = {
		limit = { is_core = CRI }
		change_culture = crimean
	}
	else_if = {
		limit = { is_core = KAZ }
		change_culture = kazani
	}
	else_if = {
		limit = { is_core = NOG }
		change_culture = nogaybak
	}
	else_if = {
		limit = { is_core = AST }
		change_culture = astrakhani
	}
	else_if = {
		limit = {
			OR = {
				is_core = QAR
				is_core = AKK
			}
		}
		change_culture = azerbaijani
	}
}

on_province_medical_building_destroyed_estate_privileges_effect = {
	if = {
		limit = {
			has_province_modifier = estate_holy_orders_development_of_hospitals_mod
		}
		remove_province_modifier = estate_holy_orders_development_of_hospitals_mod
	}
}

on_province_medical_building_built_estate_privileges_effect = {
	if = {
		limit = {
			owner = { has_estate_privilege = estate_holy_orders_development_of_hospitals }
			religion_group = christian
		}
		add_province_modifier = {
			name = estate_holy_orders_development_of_hospitals_mod
			duration = -1
		}
	}
}

on_province_manpower_building_destroyed_estate_privileges_effect = {
	if = {
		limit = {
			has_province_modifier = estate_mamluks_development_of_barracks_mod
		}
		remove_province_modifier = estate_mamluks_development_of_barracks_mod
	}
}

on_province_manpower_building_built_estate_privileges_effect = {
	if = {
		limit = {
			owner = { has_estate_privilege = estate_mamluks_development_of_barracks }
			has_owner_accepted_culture = yes
		}
		add_province_modifier = {
			name = estate_mamluks_development_of_barracks_mod
			duration = -1
		}
	}
}

change_ruthenia_formable_color = {
	if = { 
		limit = { was_tag = BLO }
		change_country_color = { 
			country = BLO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BLR }
		change_country_color = { 
			country = BLR
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BOO }
		change_country_color = { 
			country = BOO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BTY }
		change_country_color = { 
			country = BTY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BYV }
		change_country_color = { 
			country = BYV
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CHR }
		change_country_color = { 
			country = CHR
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = DGO }
		change_country_color = { 
			country = DGO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = DTV }
		change_country_color = { 
			country = DTV
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KIE }
		change_country_color = { 
			country = KIE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KMO }
		change_country_color = { 
			country = KMO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KRH }
		change_country_color = { 
			country = KRH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KSK }
		change_country_color = { 
			country = KSK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = LSK }
		change_country_color = { 
			country = LSK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MEY }
		change_country_color = { 
			country = MEY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MOA }
		change_country_color = { 
			country = MOA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MOS }
		change_country_color = { 
			country = MOS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MRM }
		change_country_color = { 
			country = MRM
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MSK }
		change_country_color = { 
			country = MSK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MSV }
		change_country_color = { 
			country = MSV
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MZH }
		change_country_color = { 
			country = MZH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = NOV }
		change_country_color = { 
			country = NOV
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = NZH }
		change_country_color = { 
			country = NZH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = OBL }
		change_country_color = { 
			country = OBL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = OKA }
		change_country_color = { 
			country = OKA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ONU }
		change_country_color = { 
			country = ONU
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ORY }
		change_country_color = { 
			country = ORY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = PLL }
		change_country_color = { 
			country = PLL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = PLT }
		change_country_color = { 
			country = PLT
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = PNK }
		change_country_color = { 
			country = PNK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = PSK }
		change_country_color = { 
			country = PSK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = PZS }
		change_country_color = { 
			country = PZS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = RSO }
		change_country_color = { 
			country = RSO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = RYA }
		change_country_color = { 
			country = RYA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SDB }
		change_country_color = { 
			country = SDB
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SKS }
		change_country_color = { 
			country = SKS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SMO }
		change_country_color = { 
			country = SMO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SPZ }
		change_country_color = { 
			country = SPZ
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SVK }
		change_country_color = { 
			country = SVK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TAA }
		change_country_color = { 
			country = TAA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TBS }
		change_country_color = { 
			country = TBS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TMT }
		change_country_color = { 
			country = TMT
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TPT }
		change_country_color = { 
			country = TPT
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TUV }
		change_country_color = { 
			country = TUV
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TVE }
		change_country_color = { 
			country = TVE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UGL }
		change_country_color = { 
			country = UGL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = VBK }
		change_country_color = { 
			country = VBK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = VDR }
		change_country_color = { 
			country = VDR
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = VHN }
		change_country_color = { 
			country = VHN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = VOL }
		change_country_color = { 
			country = VOL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = VOO }
		change_country_color = { 
			country = VOO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = VTY }
		change_country_color = { 
			country = VTY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = XKA }
		change_country_color = { 
			country = XKA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = XMO }
		change_country_color = { 
			country = XMO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = XPY }
		change_country_color = { 
			country = XPY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = XSZ }
		change_country_color = { 
			country = XSZ
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = YAR }
		change_country_color = { 
			country = YAR
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = YYV }
		change_country_color = { 
			country = YYV
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ZNY }
		change_country_color = { 
			country = ZNY
		}
		set_country_flag = has_overriden_color_flag
	}
}

change_ireland_formable_color = {
	if = { 
		limit = { was_tag = ACN }
		change_country_color = { 
			country = ACN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = AIN }
		change_country_color = { 
			country = AIN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BEE }
		change_country_color = { 
			country = BEE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BNA }
		change_country_color = { 
			country = BNA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BNN }
		change_country_color = { 
			country = BNN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = BRF }
		change_country_color = { 
			country = BRF
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CBL }
		change_country_color = { 
			country = CBL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CBY }
		change_country_color = { 
			country = CBY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CCL }
		change_country_color = { 
			country = CCL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CCU }
		change_country_color = { 
			country = CCU
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CHB }
		change_country_color = { 
			country = CHB
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CNN }
		change_country_color = { 
			country = CNN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = CRK }
		change_country_color = { 
			country = CRK
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = DBL }
		change_country_color = { 
			country = DBL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = DMS }
		change_country_color = { 
			country = DMS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = EIL }
		change_country_color = { 
			country = EIL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = FCH }
		change_country_color = { 
			country = FCH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = FHM }
		change_country_color = { 
			country = FHM
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = FLY }
		change_country_color = { 
			country = FLY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = FMA }
		change_country_color = { 
			country = FMA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = FWS }
		change_country_color = { 
			country = FWS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = GLN }
		change_country_color = { 
			country = GLN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = IAB }
		change_country_color = { 
			country = IAB
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ICN }
		change_country_color = { 
			country = ICN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = INH }
		change_country_color = { 
			country = INH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = IVE }
		change_country_color = { 
			country = IVE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KEE }
		change_country_color = { 
			country = KEE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KID }
		change_country_color = { 
			country = KID
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = LCH }
		change_country_color = { 
			country = LCH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = LCN }
		change_country_color = { 
			country = LCN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = LEI }
		change_country_color = { 
			country = LEI
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = LGO }
		change_country_color = { 
			country = LGO
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = LRG }
		change_country_color = { 
			country = LRG
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MCM }
		change_country_color = { 
			country = MCM
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MGL }
		change_country_color = { 
			country = MGL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MNS }
		change_country_color = { 
			country = MNS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MTH }
		change_country_color = { 
			country = MTH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = OIE }
		change_country_color = { 
			country = OIE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ORD }
		change_country_color = { 
			country = ORD
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = OSS }
		change_country_color = { 
			country = OSS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SLN }
		change_country_color = { 
			country = SLN
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TBE }
		change_country_color = { 
			country = TBE
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TRY }
		change_country_color = { 
			country = TRY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TUC }
		change_country_color = { 
			country = TUC
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TYH }
		change_country_color = { 
			country = TYH
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = TYR }
		change_country_color = { 
			country = TYR
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UIB }
		change_country_color = { 
			country = UIB
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UID }
		change_country_color = { 
			country = UID
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UIL }
		change_country_color = { 
			country = UIL
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UIS }
		change_country_color = { 
			country = UIS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ULS }
		change_country_color = { 
			country = ULS
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UMA }
		change_country_color = { 
			country = UMA
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = UML }
		change_country_color = { 
			country = UML
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = WTY }
		change_country_color = { 
			country = WTY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = XDG }
		change_country_color = { 
			country = XDG
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = XKY }
		change_country_color = { 
			country = XKY
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = YBR }
		change_country_color = { 
			country = YBR
		}
		set_country_flag = has_overriden_color_flag
	}
}