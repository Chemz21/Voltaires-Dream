#Isildur's mission events.
#CLAIMING IDs 51-100

namespace = vn_missions

# #Inheritance of Flanders (51)	#NOT USED
# country_event = {
# 	id = vn_missions.51
# 	title = vn_missions.51.t
# 	desc = vn_missions.51.d
# 	picture = CONQUEST_eventPicture
	
# 	fire_only_once = yes
# 	major = yes
	
# 	trigger = {
# 		tag = BUR
# 		exists = FLA
# 		senior_union_with = FLA
# 	}
# 	mean_time_to_happen = {
# 		months = 1
# 	}
	
# 	option = {	#Inherit
# 		name = vn_missions.51.a
# 		ai_chance = { factor = 100 }
# 		hidden_effect = {
# 			if = {
# 				limit = { has_consort = yes }
# 				remove_consort = yes
# 			}
# 		}
# 		define_consort = {
# 			country_of_origin = FLA
# 			female = yes
# 			adm = 3
# 			dip = 3
# 			mil = 3
# 			age = 20
# 		}
# 		inherit = FLA
# 		#add claims
# 		artois_area = {
# 			limit = {
# 				NOT = { owned_by = ROOT }
# 				NOT = { is_permanent_claim = ROOT }
# 			}				
# 			add_permanent_claim = ROOT
# 		}
# 		picardy_area = {
# 			limit = {
# 				NOT = { owned_by = ROOT }
# 				NOT = { is_permanent_claim = ROOT }
# 			}
# 			add_permanent_claim = ROOT
# 		}
# 		2886 = { add_permanent_claim = ROOT }
# 		4051 = { add_permanent_claim = ROOT }
# 		hainaut_area = {
# 			limit = {
# 				NOT = { owned_by = ROOT }
# 				NOT = { is_permanent_claim = ROOT }
# 			}
# 			add_permanent_claim = ROOT
# 		}
# 		1866 = { add_permanent_claim = ROOT }
# 		2539 = { add_permanent_claim = ROOT }
# 		brabant_area = {
# 			limit = {
# 				NOT = { owned_by = ROOT }
# 				NOT = { is_permanent_claim = ROOT }
# 			}
# 			add_permanent_claim = ROOT
# 		}
# 		antwerp_area = {
# 			limit = {
# 				NOT = { owned_by = ROOT }
# 				NOT = { is_permanent_claim = ROOT }
# 			}
# 			add_permanent_claim = ROOT
# 		}
# 		brussels_area = {
# 			limit = {
# 				NOT = { owned_by = ROOT }
# 				NOT = { is_permanent_claim = ROOT }
# 			}
# 			add_permanent_claim = ROOT
# 		}
# 	}
# }

#A New Capital? (52)
country_event = {
	id = vn_missions.52
	title = vn_missions.52.t
	desc = vn_missions.52.d
	picture = CITY_VIEW_eventPicture
	
	is_triggered_only = yes
	
	option = {	#Move it!
		name = vn_missions.52.a
		ai_chance = { factor = 75 }
		set_capital = 989
	}
	option = {	#No thanks
		name = vn_missions.52.b
		ai_chance = { factor = 25 }
	}
}

#Coronation at Trier (53)
country_event = {
	id = vn_missions.53
	title = vn_missions.53.t
	desc = vn_missions.53.d
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = vn_missions.53.a
		ai_chance = { factor = 100 }
		add_prestige = 50
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
		add_stability = 1
		reverse_add_opinion = {
			who = emperor
			modifier = trier_coronation
		}
		add_country_modifier = {
			name = "bur_third_kingdom_of_burgundy_mission"
			duration = 7300
		}
	}
}

#Byzantium Agrees to our Offer (54)
country_event = {
	id = vn_missions.54
	title = vn_missions.54.t
	desc = vn_missions.54.d
	picture = ST_PETERS_CHURCH_eventPicture
	
	is_triggered_only = yes
	
	option = {	#These troops are now yours
		name = vn_missions.54.a
		ai_chance = { factor = 100 }
		add_manpower = -15
		add_treasury = 250
		BYZ = {
			add_treasury = -250
			capital_scope = {	#10 inf 5 cav
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				infantry = BYZ
				cavalry = BYZ
				cavalry = BYZ
				cavalry = BYZ
				cavalry = BYZ
				cavalry = BYZ
			}
			create_general = {
				culture = normand
				tradition = 50
			}
			add_opinion = {
				who = ROOT
				modifier = nrm_gave_troops
			}
		}
	}
}

#Normandy Requests Troops (55)
country_event = {
	id = vn_missions.55
	title = vn_missions.55.t
	desc = vn_missions.55.d
	picture = LAND_MILITARY_eventPicture
	
	is_triggered_only = yes
	
	option = {	#Gladly, if your cause is just...
		name = vn_missions.55.a
		custom_tooltip = vn_missions.55.a.tt
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				NOT = { manpower = 5 }
			}
			modifier = {
				factor = 0.5
				is_at_war = yes
			}
			modifier = {
				factor = 1.5
				manpower = 10
			}
		}
		NRM = {
			country_event = {
				id = vn_missions.56
				days = 15
				random = 5
				tooltip = vn_missions.55.a.tt2	#We send a diplomat back to Normandy informing them of our response.
			}
		}
	}
	
	option = {	#We can't send any troops at the moment
		name = vn_missions.55.b
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				manpower = 5
			}
		}
		NRM = {
			country_event = {
				id = vn_missions.57
				days = 15
				random = 5
				tooltip = vn_missions.55.a.tt2	#We send a diplomat back to Normandy informing them of our response.
			}
		}
	}
}

#[FROM.GetName] Agrees to Send Troops (56)
country_event = {
	id = vn_missions.56
	title = vn_missions.56.t
	desc = vn_missions.56.d
	picture = FARMING_eventPicture
	
	is_triggered_only = yes
	
	option = {	#Great!
		name = vn_missions.56.a
		ai_chance = { factor = 100 }
		random_owned_province = {
			limit = { is_in_capital_area = yes }
			add_unit_construction = {
				type = infantry
				amount = 4
				speed = 0.1
				cost = 0
			}
			add_unit_construction = {
				type = cavalry
				amount = 1
				speed = 0.1
				cost = 0
			}
		}
		FROM = {
			add_manpower = -5
		}
		add_country_modifier = {
			name = "nrm_sent_troops"
			duration = 3650
		}
	}
}

#[FROM.GetName] Refuses to Send Troops (57)
country_event = {
	id = vn_missions.57
	title = vn_missions.57.t
	desc = vn_missions.57.d
	picture = FARMING_eventPicture
	
	is_triggered_only = yes
	
	option = {	#You cowards are refusing to assist ME?!
		name = vn_missions.57.a
		ai_chance = { factor = 100 }
		add_opinion = {
			who = FROM
			modifier = nrm_refused_troops
		}
	}
}

#Education Act (58)
country_event = {
	id = vn_missions.58
	title = vn_missions.58.t
	desc = vn_missions.58.d
	picture = GREAT_BUILDING_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = vn_missions.58.a
		ai_chance = { factor = 100 }
		add_innovativeness_big_effect = yes
		add_country_modifier = {
			name = "sco_education_act"
			duration = 18250
		}
	}
}

#Great Britain united (59)
country_event = {
	id = vn_missions.59
	title = vn_missions.59.t
	desc = vn_missions.59.d
	picture = GREAT_BUILDING_eventPicture
	
	is_triggered_only = yes
	
	option = {	#move capital to London
		name = vn_missions.59.a
		ai_chance = { factor = 75 }
		if = {
			limit = {
				owns_core_province = 2268
				2268 = {
					NOT = { is_capital = yes }
				}
			}
			set_capital = 2268
		}
	}
	option = {	#Don't move capital
		name = vn_missions.59.b
		ai_chance = { factor = 25 }
	}
}

#National Kirk (60)
country_event = {
	id = vn_missions.60
	title = vn_missions.60.t
	desc = vn_missions.60.d
	picture = RELIGIOUS_TURMOIL_eventPicture
	
	is_triggered_only = yes
	
	option = {	#Found the Kirk
		name = vn_missions.60.a
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				OR = {
					religion = catholic
					religion = catholique
				}
			}
			modifier = {
				factor = 1.25
				religion = reformed
			}
		}
		if = {
			limit = {
				NOT = { religion = reformed }
			}
			change_religion = reformed
		}
		if = {
			limit = {
				capital_scope = {
					NOT = { religion = reformed }
				}
			}
			capital_scope = {
				change_religion = reformed
			}
		}
		every_owned_province = {
			limit = { 
				NOT = { religion = reformed }
			}
			add_province_modifier = {
				name = "sco_national_kirk"
				duration = 9125
			}
		}

	}
	option = {	#Don't found it
		name = vn_missions.60.b
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				religion = reformed
			}
			modifier = {
				factor = 0.5
				OR = {
					religion = anabaptist
					religion = anglican
					religion = protestant
				}
			}
			modifier = {
				factor = 1.25
				OR = {
					religion = catholic
					religion = catholique
				}
			}
		}
		add_country_modifier = {
			name = "sco_no_national_kirk"
			duration = 9125
		}
	}
}

#61 spare

#Frankish Influence Wanes (62)
country_event = {
	id = vn_missions.62
	title = vn_missions.62.t
	desc = vn_missions.62.d
	picture = SIEGE_eventPicture

	is_triggered_only = yes

	option = {
		name = vn_missions.62.a
		ai_chance = { factor = 100 }
		add_prestige = 10
		add_legitimacy = 5
		add_country_modifier = {
			name = "brc_frankish_yoke_lifted"
			duration = 7300
		}
	}
}

#The Stone of Scone (63)
country_event = {
	id = vn_missions.63
	title = vn_missions.63.t
	desc = vn_missions.63.d
	picture = GOOD_WITH_MONARCH_eventPicture

	is_triggered_only = yes

	option = {
		name = vn_missions.63.a
		ai_chance = { factor = 100 }
        add_prestige = 25
        if = {
            limit = { exists = HSC }
            HSC = { add_prestige = -25 }
        }
        else_if = {
            limit = { exists = SCO }
            SCO = { add_prestige = -25 }
        }
        add_country_modifier = {
            name = "took_stone_of_scone"
            duration = -1
        }
	}
}

#Promotion to Duchy! (64)
country_event = {
	id = vn_missions.64
	title = vn_missions.64.t
	desc = {
        trigger = { is_emperor = no }
        desc = vn_missions.64.d
    }
    desc = {
        trigger = { is_emperor = yes }
        desc = vn_missions.64.d2
    }
	picture = CONQUEST_eventPicture

	is_triggered_only = yes

	option = {
        name = vn_missions.64.a
        trigger = { is_emperor = no }
		ai_chance = { factor = 100 }
        add_treasury = -400
        if = {
            limit = {
                NOT = { government_rank = 4 }
            }
            set_government_rank = 4
        }
        add_prestige = 50
    }
    option = {
        name = vn_missions.64.b
        highlight = yes
        trigger = { is_emperor = yes }
        ai_chance = { factor = 100 }
        add_imperial_influence = -5
        if = {
            limit = {
                NOT = { government_rank = 4 }
            }
            set_government_rank = 4
        }
        add_prestige = 50
	}
}

#Swiss Mercs for Hire (65)
country_event = {
	id = vn_missions.65
	title = vn_missions.65.t
	desc = vn_missions.65.d
	picture = MILITARY_CAMP_eventPicture

	is_triggered_only = yes

	option = {
		name = vn_missions.65.a
        ai_chance = { factor = 100 }
        random_owned_province = {
            limit = { controlled_by = ROOT }
            add_unit_construction = {
                type = infantry
                amount = 15
                speed = 0.5
                cost = 0
                mercenary = yes
            }
            add_unit_construction = {
                type = cavalry
                amount = 5
                speed = 0.5
                cost = 0
                mercenary = yes
            }
        }
        add_treasury = -200
        add_country_modifier = {
            name = "mlo_swiss_mercs"
            duration = 730
        }
	}
}

#Lombard League (66)
country_event = {
	id = vn_missions.66
	title = vn_missions.66.t
	desc = vn_missions.66.d
	picture = HRE_eventPicture

	is_triggered_only = yes
    major = yes

	option = {
		name = vn_missions.66.a
        ai_chance = { factor = 100 }
        add_country_modifier = {
            name = "lombard_league_member"
            duration = -1
        }
        every_known_country = {
            limit = {
                capital_scope = {
                    superregion = lombardy_superregion
                }
                OR = {
                    alliance_with = ROOT
                    has_opinion = {
                        who = ROOT
                        value = 100
                    }
                }
            }
            add_country_modifier = {
                name = "lombard_league_member"
                duration = -1
            }
        }
	}
}

#Lombard League disbands (67)
country_event = {
	id = vn_missions.67
	title = vn_missions.67.t
	desc = vn_missions.67.d
	picture = HRE_eventPicture

	trigger = {
        has_country_modifier = lombard_league_member
        any_country = {
            has_country_modifier = lombard_league_member
        }
        is_year = 1250
        OR = {
            is_part_of_hre = no
            is_emperor = yes
            emperor = {
                NOT = {
                    OR = {
                        ADM = 4
                        DIP = 4
                        MIL = 4
                    }
                }
            }
        }
    }

    mean_time_to_happen = {
        months = 1
    }

	option = {
		name = vn_missions.67.a
        ai_chance = { factor = 100 }
        remove_country_modifier = lombard_league_member
        every_country = {
            limit = {
                has_country_modifier = lombard_league_member
            }
            remove_country_modifier = lombard_league_member
        }
	}
}

#The Capital of Lotharingia (68)
country_event = {
	id = vn_missions.68
	title = vn_missions.68.t
	desc = vn_missions.68.d
	picture = CITY_VIEW_eventPicture

    is_triggered_only = yes

	option = {
		name = vn_missions.68.a
        ai_chance = { 
            factor = 33
            modifier = {
                factor = 2
                2995 = { development = 20 }
            }
        }
        trigger = {
            NOT = { capital = 2995 }
        }
        set_capital = 2995
    }
    option = {
		name = vn_missions.68.b
        ai_chance = { 
            factor = 33
            modifier = {
                factor = 2
                34 = { development = 20 }
            }
        }
        trigger = {
            NOT = { capital = 34 }
        }
        set_capital = 34
    }
    option = {
		name = vn_missions.68.c
        ai_chance = { 
            factor = 33
            modifier = {
                factor = 2
                869 = { development = 20 }
            }
        }
        trigger = {
            NOT = { capital = 869 }
        }
        set_capital = 869
	}
    option = {
		name = vn_missions.68.e
        ai_chance = { factor = 0 }
	}
}

# Nitra requests union with Moravia (69)
country_event = {
	id = vn_missions.69
	title = vn_missions.69.t
	desc = vn_missions.69.d
	picture = DIPLOMACY_eventPicture

    is_triggered_only = yes

	option = {	#Accept
		name = vn_missions.69.a
        ai_chance = { 
			factor = 50
		}
		SLO = {
			create_union = ROOT
		}
    }
	option = {	#Don't accept
		name = vn_missions.69.b
        ai_chance = { 
			factor = 50
			modifier = {
				factor = 0
				has_opinion = {
					who = SLO
					value = 100
				}
				SLO = {
					dip_power = 300
				}
			}
		}
        reverse_add_casus_belli = {
			type = cb_fabricated_claims
			months = 300
			target = SLO
		}
    }
}

# Reestablishment of Great Moravia
country_event = {
	id = vn_missions.70
	title = vn_missions.70.t
	desc = vn_missions.70.d
	picture = GOOD_WITH_MONARCH_eventPicture

    is_triggered_only = yes

	option = {	#Endless Glory!
		name = vn_missions.70.a
        ai_chance = { factor = 100 }
		2911 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
		781 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
		444 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
		}
		440 = {
			if = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
			}
		}
		silesia_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		lusatia_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		malopolska_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		westhungary_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		easthungary_region = {
			limit = {
				NOT = { is_core = ROOT }
				NOT = { is_permanent_claim = ROOT }
			}
			add_permanent_claim = ROOT
		}
		add_country_modifier = {
			name = "slo_endless_glory"
			duration = -1
		}
    }
}

#71-76 free 

# Manifestis Probatum (77)
country_event = {
	id = vn_missions.77
	title = vn_missions.77.t
	desc = vn_missions.77.d
	picture = POPE_PREACHING_eventPicture

    is_triggered_only = yes

	option = {
		name = vn_missions.77.a
        ai_chance = { factor = 100 }
        add_prestige = 10
        add_papal_influence = 20
        add_legitimacy = 10
        add_country_modifier = {
            name = "por_papal_recognition"
            duration = 9125
        }
    }
}