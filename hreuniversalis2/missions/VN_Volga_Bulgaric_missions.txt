#Volga Bulgaric missions
#contributed by cheeseontoast51 & s0gger
#coded by ShyGuy13

vn_vgb_missions_slot_1 = {
    slot = 6
    generic = no
    ai = yes
    potential = {
        tag = VGB
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_vgb_bulgaric_legacy = {
        icon = mission_unite_home_region
        position = 1
        required_missions = { }
        trigger = {
            num_of_generals = 2
			army_size_percentage = 0.75
			land_maintenance = 1
			cavalry_fraction = 0.3
			NOT = { num_of_mercenaries = 1 }
        }
        effect = {
           	mari_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			chuvashia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
        }
    }
	vn_vgb_mongol_thorn = {
        icon = mission_unite_home_region
        position = 2
        required_missions = { vn_vgb_bulgaric_legacy }
        trigger = {
            OR = {
				war_with = JMN
				war_with = GLH
				war_with = ILK
				NOT = {
					exists = JMN
					exists = GLH
					exists = ILK
				}
			}
        }
        effect = {
            
        }
    }
    vn_vgb_bulgaria_unconquered = {
        icon = mission_unite_home_region
        position = 3
        required_missions = { vn_vgb_mongol_thorn }
        trigger = {
            NOT = { current_age = age_of_empire }
			NOT = { current_age = age_of_holy_wars }
			NOT = { current_age = age_of_crisis }
			NOT = {
				any_province = {
					OR = {
						superregion = central_asia_superregion
						superregion = ural_superregion
					}
					OR = {
						owned_by = JMN
						owned_by = GLH
						owned_by = ILK
					}
				}
			}
        }
        effect = {
			add_prestige = 10
			add_mil_power = 50
            add_country_modifier = {
				name = vgb_bulgaria_unconquered_mission
				duration = 18250
			}
        }
    }
    vn_vgb_patronize_bolghar = {
        icon = mission_unite_home_region
        position = 4
        required_missions = { vn_vgb_north_volga_trade }
		provinces_to_highlight = {
			province_id = 6462
		}
        trigger = {
            6462 = {
				owned_by = ROOT
				is_core = ROOT
				development = 30
				NOT = { unrest = 1 }
				NOT = { num_free_building_slots = 1 }
			}
        }
        effect = {
            6462 = {
				if = {
					limit = {
						NOT = {
							province_has_center_of_trade_of_level = 3
						}
					}
					add_center_of_trade_level = 1
				}
				else = {
					add_base_production = 3
				}
			}
			add_country_modifier = {
				name = vgb_patronize_bolghar_mission
				duration = 9125
			}
        }
    }
    vn_vgb_muslim_emmissaries = {
        icon = mission_unite_home_region
        position = 5
        required_missions = { vn_vgb_patronize_bolghar }
        trigger = {
			prestige = 50
            any_ally = {
				NOT = { is_neighbor_of = ROOT }
				total_development = 250
				religion_group = muslim
				has_opinion = {
					who = ROOT
					value = 150
				}
			}
        }
        effect = {
			add_dip_power = 100
			add_country_modifier = {
				name = vgb_muslim_emmissaries_mission
				duration = 9125
			}
        }
	}
}

vn_vgb_missions_slot_2 = {
    slot = 7
    generic = no
    ai = yes
    potential = {
        tag = VGB
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_vgb_develop_samara = {
        icon = mission_unite_home_region
        position = 4
        required_missions = { vn_vgb_north_volga_trade }
        trigger = {
            
        }
        effect = {
            
        }
    }
    vn_vgb_trade_fortresses = {
        icon = mission_unite_home_region
        position = 5
		required_missions = { vn_vgb_develop_samara }
		provinces_to_highlight = {
			any_neighbor_province = {
				OR = {
					province_id = 7220
					province_id = 7221
					province_id = 7222
					province_id = 7223
					province_id = 7224
					province_id = 7225
					province_id = 7226
					province_id = 7227
					province_id = 7228
					province_id = 7229
					province_id = 7230
				}
			}
		}
        trigger = {
            calc_true_if = {
				amount = 5
				all_owned_province = {
					has_fort_trigger = yes
					any_neighbor_province = {
						OR = {
							province_id = 7220
							province_id = 7221
							province_id = 7222
							province_id = 7223
							province_id = 7224
							province_id = 7225
							province_id = 7226
							province_id = 7227
							province_id = 7228
							province_id = 7229
							province_id = 7230
						}
					}
				}
			}
        }
        effect = {
            add_country_modifier = {
				name = vgb_trade_fortresses_mission
				duration = 9125
			}
        }
    }
    vn_vgb_eurasian_monopoly = {
        icon = mission_unite_home_region
        position = 6
        required_missions = { vn_vgb_trade_fortresses }
		provinces_to_highlight = {
			OR = {
				province_id = 3785
				province_id = 6444
				province_id = 6681
				province_id = 6692
				province_id = 6512
			}
			NOT = {
				is_strongest_trade_power = ROOT
			}
		}
        trigger = {
            treasury = 1000
			3785 = {
				is_strongest_trade_power = ROOT
			}
			6444 = {
				is_strongest_trade_power = ROOT
			}
			6681 = {
				is_strongest_trade_power = ROOT
			}
			6692 = {
				is_strongest_trade_power = ROOT
			}
			6512 = {
				is_strongest_trade_power = ROOT
			}
        }
        effect = {
			capital_scope = {
				if = {
					limit = {
						num_free_building_slots = 1
						NOT = {
							has_building = marketplace
							has_building = trade_depot
							has_building = stock_exchange
						}
					}
					add_building = marketplace
				}
				else_if = {
					limit = {
						num_free_building_slots = 1
						NOT = {
							has_building = trade_depot
							has_building = stock_exchange
						}
					}
					add_building = trade_depot
				}
				else_if = {
					limit = {
						num_free_building_slots = 1
						NOT = {
							has_building = stock_exchange
						}
					}
					add_building = stock_exchange
				}
				else = {
					add_base_production = 3
				}
			}
            add_country_modifier = {
				name = vgb_eurasian_monopoly_mission
				duration = -1
			}
        }
	}
}

vn_vgb_missions_slot_3 = {
    slot = 8
    generic = no
    ai = yes
    potential = {
        tag = VGB
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_vgb_north_volga_trade = {
        icon = mission_unite_home_region
        position = 3
        required_missions = { vn_vgb_conquer_udmurt }
		provinces_to_highlight = {
			province_id = 6444
		}
        trigger = {
            6444 = {
				trade_share = {
					country = ROOT
					share = 75
				}
			}
        }
        effect = {
            
        }
    }
    vn_vgb_two_rivers = {
        icon = mission_unite_home_region
        position = 4
        required_missions = { vn_vgb_north_volga_trade }
		provinces_to_highlight = {
			province_id = 6462
		}
        trigger = {
            6462 = {
				owned_by = ROOT
				is_core = ROOT
				development = 25
			}
        }
        effect = {
            add_country_modifier = {
				name = vgb_two_rivers_mission
				duration = 9125
			}
        }
    }
    vn_vgb_russian_trade_agreements = {
        icon = mission_unite_home_region
        position = 5
        required_missions = { vn_vgb_two_rivers }
		provinces_to_highlight = {
			OR = {
				province_id = 6692
				province_id = 6681
			}
			NOT = {
				trade_share = {
					country = ROOT
					share = 40
				}
			}
		}
        trigger = {
            any_ally = {
				culture_group = east_slavic
				has_opinion = {
					who = ROOT
					value = 150
				}
			}
			OR = {
				6692 = {
					trade_share = {
						country = ROOT
						share = 40
					}
				}
				6681 = {
					trade_share = {
						country = ROOT
						share = 40
					}
				}
			}
        }
        effect = {
			add_years_of_income = 0.5
			6692 = {
				add_trade_modifier = {
					who = THIS
					duration = 9125
					power = 10
					key = vgb_russian_trade_agreements
				}
			}
            6681 = {
				add_trade_modifier = {
					who = ROOT
					duration = 9125
					power = 10
					key = vgb_russian_trade_agreements
				}
			}
        }
    }
    vn_vgb_no_more_wine = {
        icon = mission_unite_home_region
        position = 6
        required_missions = { vn_vgb_russian_trade_agreements }
        trigger = {
            
        }
        effect = {
            add_country_modifier = {
				name = vgb_no_more_wine_mission
				duration = 9125
			}
        }
    }
    vn_vgb_mother_volga = {
        icon = mission_unite_home_region
        position = 7
        required_missions = { vn_vgb_eurasian_monopoly vn_vgb_no_more_wine vn_vgb_conquer_sasqin }
        trigger = {
            development_in_provinces = {
				value = 250
				region = kazan_region
			}
        }
        effect = {
			add_mercantilism = 5
			add_country_modifier = {
				name = vgb_mother_volga_mission
				duration = -1
			}
        }
	}
}

vn_vgb_missions_slot_4 = {
    slot = 9
    generic = no
    ai = yes
    potential = {
        tag = VGB
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_vgb_conquer_mari = {
        icon = mission_unite_home_region
        position = 1
        required_missions = { vn_vgb_conquer_mari }
		provinces_to_highlight = {
			OR = {
				area = mari_area
				area = chuvashia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            mari_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			chuvashia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
            udmurtia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			mari_area = {
				add_province_modifier = {
					name = vgb_conquer_udmurt_mission
					duration = 9125
				}
			}
			chuvashia_area = {
				add_province_modifier = {
					name = vgb_conquer_udmurt_mission
					duration = 9125
				}
			}
        }
    }
    vn_vgb_conquer_udmurt = {
        icon = mission_unite_home_region
        position = 2
        required_missions = { vn_vgb_conquer_mari }
		provinces_to_highlight = {
			area = udmurtia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            udmurtia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
            kama_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			ufa_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			udmurtia_area = {
				add_province_modifier = {
					name = vgb_conquer_udmurt_mission
					duration = 9125
				}
			}
        }
    }
    vn_vgb_conquer_bashkiria = {
        icon = mission_unite_home_region
        position = 3
		required_missions = { vn_vgb_conquer_udmurt }
		provinces_to_highlight = {
			OR = {
				area = kama_area
				area = ufa_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
			kama_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
            ufa_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
            saratov_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			kama_area = {
				add_province_modifier = {
					name = vgb_conquer_udmurt_mission
					duration = 9125
				}
			}
			ufa_area = {
				add_province_modifier = {
					name = vgb_conquer_udmurt_mission
					duration = 9125
				}
			}
        }
    }
    vn_vgb_conquer_nogai = {
        icon = mission_unite_home_region
        position = 4
		required_missions = { vn_vgb_conquer_bashkiria }
		provinces_to_highlight = {
			area = saratov_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
        trigger = {
            saratov_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
            sarai_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = vgb_conquer_nogai_mission
				duration = 9125
			}
        }
    }
    vn_vgb_conquer_volga = {
        icon = mission_unite_home_region
        position = 5
		required_missions = { vn_vgb_conquer_nogai }
		provinces_to_highlight = {
			area = sarai_area
		}
        trigger = {
            sarai_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
            astrakhan_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = vgb_conquer_volga_mission
				duration = 9125
			}
        }
    }
    vn_vgb_conquer_sasqin = {
        icon = mission_unite_home_region
        position = 6
        required_missions = { vn_vgb_conquer_volga }
		provinces_to_highlight = {
			area = astrakhan_area
		}
        trigger = {
            astrakhan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
        }
        effect = {
            3785 = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
				if = {
					limit = {
						NOT = {
							province_has_center_of_trade_of_level = 3
						}
					}
					add_center_of_trade_level = 1
				}
				else = {
					add_base_production = 3
				}
			}
			atyrau_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
			kumykia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_claim = ROOT }
				}
				add_claim = ROOT
			}
        }
	}
}

vn_vgb_missions_slot_5 = {
    slot = 10
    generic = no
    ai = yes
    potential = {
        tag = VGB
        NOT = { map_setup = map_setup_random }
    }
    has_country_shield = yes

    vn_vgb_conquer_mordovia = {
        icon = mission_unite_home_region
        position = 4
        required_missions = { vn_vgb_conquer_bashkiria }
        trigger = {
            
        }
        effect = {
            
        }
    }
    vn_vgb_finno_ugric_friendship = {
        icon = mission_unite_home_region
        position = 5
        required_missions = { vn_vgb_conquer_mordovia }
        trigger = {
            
        }
        effect = {
            
        }
	}
}