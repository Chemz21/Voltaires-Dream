#historyperson
#IDS over 200
namespace = vn_missions

###CHINY / VERMANDOIS / SOISSONS
#Pope crowns Root as Emperor of Europe
country_event = {
	id = vn_missions.200
	title = vn_missions.200.t
	desc = vn_missions.200.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	option = {
		name = "vn_missions.200.a"
		set_government_rank = 6
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
		add_papal_influence = 25
		reverse_add_opinion = {
			who = emperor
			modifier = karling_frank_coronation_opinion
		}
		if = {
			limit = { religion = catholic }
			add_historical_friend = PAP
			PAP = { add_historical_friend = ROOT }
		}
		if = {
			limit = { religion = catholique }
			add_historical_friend = AVI
			AVI = { add_historical_friend = ROOT }
		}
	}
}
###BAGHDAD
#Ship Durability Research
country_event = {
	id = vn_missions.201
	title = vn_missions.201.t
	desc = vn_missions.201.d
	picture = INVENTION_eventPicture

	is_triggered_only = yes

	option = {
		name = "vn_missions.201.a"
		add_years_of_income = -0.5
		add_country_modifier = {
			name = "bgh_ship_research_event"
			duration = 9125
	    }
	}
	option = {
		name = "vn_missions.201.b"
		add_prestige = -10
		add_country_modifier = {
			name = "bgh_denied_ship_research_event"
			duration = 9125
	    }
	}
}
#Viziers
country_event = {
	id = vn_missions.202
	title = vn_missions.202.t
	desc = vn_missions.202.d
	picture = COURT_eventPicture

	is_triggered_only = yes

	option = {
		name = "vn_missions.202.a"
		add_estate_influence_modifier = {
			estate = estate_nobles
			desc = "vn_missions.202.ab"
			influence = 10
			duration = 9125
		}	
	}
}

###Luxembourg
#Golden Bull of 1356
country_event = {
	id = vn_missions.203
	title = vn_missions.203.t
	desc = vn_missions.203.d
	picture = REFORM_eventPicture

	is_triggered_only = yes

    option = {
        name = "vn_missions.203.a"
        trigger = { 
			NOT = {
				OR = {
					num_of_electors = 1
					num_of_electors = 2
					num_of_electors = 3
					num_of_electors = 4
					num_of_electors = 5
					num_of_electors = 6
					num_of_electors = 7
					num_of_electors = 8
				}		
			}
		}
        if = { 
            limit = {
                any_elector = { 
					OR = {
						is_rival = ROOT 
						has_opinion = {
							who = ROOT
							value = 0
						}
					}
					is_subject = no
					was_player = no
				}
            }
            random_elector = {
                limit = { 
					OR = {
						is_rival = ROOT 
						has_opinion = {
							who = ROOT
							value = 0
						}
					}
					is_subject = no
					was_player = no
				}
				immediate = {
					country_event = { id = vn_missions.204 }
					elector = no
				}
            }			
        }
		else_if = {
            random_elector = { 
                limit = {
					is_subject = no
					was_player = no 				
                    NOT = {
                        has_opinion = {
                            who = ROOT
                            value = 50
                        }
                    }
                }
				immediate = {
					country_event = { id = vn_missions.204 }
					elector = no
				}
            }		
		}
        else = {
			random_elector = { 
				immediate = {
					country_event = { id = vn_missions.204 }
					elector = no
				}
			}
        }
		set_country_flag = vn_missions_gained_electorate
        add_imperial_influence = 50
        elector = yes
    }
    option = {
        name = "vn_missions.203.b"
        trigger = { 
			OR = {
	            num_of_electors = 1
				num_of_electors = 2
	            num_of_electors = 3
				num_of_electors = 4
	            num_of_electors = 5
				num_of_electors = 6
	            num_of_electors = 7
				num_of_electors = 8
			}
        }
		set_country_flag = vn_missions_gained_electorate
        add_imperial_influence = 50
        elector = yes
    }
}

#Excluded From the Electorate
country_event = {
	id = vn_missions.204
	title = vn_missions.204.t
	desc = vn_missions.204.d
	picture = REFORM_eventPicture

	is_triggered_only = yes

    option = {
        name = "vn_missions.204.a" #An Unfortunate Decision
		ai_chance = {
			factor = 25
			modifier = {
				factor = 0
				NOT = {
					emperor = {
						army_strength = {
							who = ROOT
							value = 1
						}
					}
				}
			}
		}
		any_elector = {
			limit = {
				has_country_flag = vn_missions_gained_electorate
			}
			add_prestige = -50
			reverse_add_opinion = {
				who = ROOT
				modifier = lux_golden_bull_opinion
			}
		}
    }
    option = {
        name = "vn_missions.204.b" #Fight for the Electorate
		ai_chance = {
			factor = 75
			modifier = {
				factor = 0
				emperor = {
					army_strength = {
						who = ROOT
						value = 1
					}
				}
			}
		}
		immediate = {
			set_country_flag = vn_missions_fight_for_electorate
		}
		any_elector = {
			limit = {
				has_country_flag = vn_missions_gained_electorate
			}
			reverse_add_opinion = {
				who = ROOT
				modifier = lux_golden_bull_opinion
			}
		}
		declare_war_with_cb = {
			who = emperor
			casus_belli = cb_humiliate_rotw
		}
    }
}

#Defeat of the Emperor
country_event = {
	id = vn_missions.205
	title = vn_missions.205.t
	desc = vn_missions.205.d
	picture = REFORM_eventPicture

	fire_only_once = yes

	trigger = {
		has_country_flag = vn_missions_fight_for_electorate
		any_elector = {
			limit = {
				has_country_flag = vn_missions_gained_electorate
			}
			war_score_against = {
				who = ROOT
				value = -50
			}
		}
	}
	
	mean_time_to_happen = {
 		days = 1
 	}	

    option = {
        name = "vn_missions.205.a" #Regain the Electorate 
		any_elector = {
			limit = {
				has_country_flag = vn_missions_gained_electorate
			}
			elector = no
		}		
		elector = yes
		add_prestige = 50
		add_country_modifier = {
			name = "lux_regained_electorate_mission"
			duration = 9125
		}		
    }
}

###Other Events
#IDs 300 and over
#XPavia 0, XSicily 1, XBarcelona 2, XProvence 3, XFlanders 6, XBrabant 7
#Bohemia 4, Swabia/von Hohenstaufen 5
#Unique Political Situation (Bohemia)
country_event = {
	id = vn_missions.304
	title = vn_missions.304.t
	desc = vn_missions.304.d
	picture = HRE_eventPicture
	
	fire_only_once = yes

	trigger = { 
		tag = BOH
		army_size_percentage = 1
		navy_size_percentage = 1
		num_of_generals = 1
		stability = 1
		has_3_advisors_trigger = yes
		OR = {
			has_idea_group = logistics_ideas
			has_idea_group = offensive_ideas
			has_idea_group = defensive_ideas
			has_idea_group = quality_ideas
			has_idea_group = quantity_ideas
			has_idea_group = naval_ideas
			has_idea_group = aristocracy_ideas
			has_idea_group = plutocracy_ideas
		}	
		NOT = {
			has_country_flag = had_hp_event
		}
	}	
	
	mean_time_to_happen = {
 		months = 1
 	}
	
	immediate = {
		set_country_flag = had_hp_event
	} 
	
	option = {
		name = vn_missions.300.a
		ai_chance = { factor = 50 }
		trigger = {
			NOT = { 
				OR = {
					has_idea_group = aristocracy_ideas
					has_idea_group = plutocracy_ideas
				}	
				war_score = 50
			}
		}		
		add_adm_power = 25
		add_dip_power = 25
		add_mil_power = 25
	}
	option = {
		name = vn_missions.300.b
		ai_chance = { factor = 50 }
		add_prestige = 10		
		add_country_modifier = {
			name = "pva_rise_event"
			duration = 9125
		}
	}
	option = {
		name = vn_missions.300.c
		ai_chance = { factor = 50 }
		trigger = {
			OR = {
				has_idea_group = aristocracy_ideas
				has_idea_group = plutocracy_ideas
			}
			war_score = 50		
		}
		add_army_tradition = 10
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
		hidden_effect = {
			add_years_of_income = 1  
			add_country_modifier = {
				name = "boh_aspire_for_local_control_event"
				duration = -1
			}
			add_country_modifier = {
				name = "boh_muster_our_strength_event"
				duration = -1
			}
		}
	}
}

#Reunite Swabia (Swabia/von Hohenstaufen)
country_event = {
	id = vn_missions.305
	title = vn_missions.305.t
	desc = vn_missions.305.d
	picture = BATTLE_eventPicture
	
	fire_only_once = yes

	trigger = { 
		OR = {
			tag = WWS
			AND = {
				dynasty = "von Hohenstaufen"
				mission_completed = "vn_sic_our_ancestral_domain"
			}
		}
		army_size_percentage = 1
		navy_size_percentage = 1
		num_of_generals = 1
		stability = 1
		has_3_advisors_trigger = yes
		OR = {
			has_idea_group = logistics_ideas
			has_idea_group = offensive_ideas
			has_idea_group = defensive_ideas
			has_idea_group = quality_ideas
			has_idea_group = quantity_ideas
			has_idea_group = naval_ideas
			has_idea_group = aristocracy_ideas
			has_idea_group = plutocracy_ideas
		}	
		NOT = {
			has_country_flag = had_hp_event
		}
	}	
	
	mean_time_to_happen = {
 		months = 1
 	}
	
	immediate = {
		set_country_flag = had_hp_event
	} 
	
	option = {
		name = vn_missions.300.a
		ai_chance = { factor = 50 }
		trigger = {
			NOT = { 
				OR = {
					has_idea_group = aristocracy_ideas
					has_idea_group = plutocracy_ideas
				}	
				war_score = 50
			}
		}		
		add_adm_power = 25
		add_dip_power = 25
		add_mil_power = 25
	}
	option = {
		name = vn_missions.300.b
		ai_chance = { factor = 50 }
		add_prestige = 10		
		add_country_modifier = {
			name = "pva_rise_event"
			duration = 9125
		}
	}
	option = {
		name = vn_missions.300.c
		ai_chance = { factor = 50 }
		trigger = {
			OR = {
				has_idea_group = aristocracy_ideas
				has_idea_group = plutocracy_ideas
			}
			war_score = 50		
		}
		add_army_tradition = 10
		add_adm_power = 100
		add_dip_power = 100
		add_mil_power = 100
		hidden_effect = {
			add_years_of_income = 1  
			add_country_modifier = {
				name = "wws_show_our_strength_event"
				duration = -1
			}
			add_country_modifier = {
				name = "wws_reunite_swabia_event"
				duration = -1
			}
		}
	}
}
