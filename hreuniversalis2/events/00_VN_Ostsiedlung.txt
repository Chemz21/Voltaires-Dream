namespace = ostsiedlung

#Free City of Riga
country_event = {
	id = ostsiedlung.1
    title = ostsiedlung.1.t
	desc = ostsiedlung.1.d
	picture = HARBOUR_eventPicture

	fire_only_once = yes

	trigger = {
		OR = {
			tag = TEU
			tag = LIV
		}
		NOT = { started_in = 1201.1.1 }
		is_year = 1150
		NOT = { is_year = 1350 }
		owns = 5793
		num_of_cities = 5
		NOT = { exists = RGS }
	}

	option = {
		name = ostsiedlung.1.a
		5793 = {
			remove_core = ROOT
			add_core = RGS
			cede_province = RGS
			if = {
				limit = { hre_size = 1 }
				set_in_empire = yes
			}
		}
		hidden_effect = {
			5793 = {
				change_religion = catholic
				change_culture = prussian
				add_permanent_province_modifier = {
					name = hanseatic_city
					duration = -1
				}
			}
			RGS = {
				change_government = republic
				if = {
					limit = {
						has_global_flag = free_city_allowed
						NOT = {
							calc_true_if = {
								amount = 50
								all_country = {
									has_reform = free_city
								}
							}
						}
					}
					add_government_reform = free_city
				}
				else = {
					add_government_reform = oligarchy_reform
				}
				capital_scope = {
					build_to_forcelimit = {
						infantry = 0.7
						cavalry = 0.3
						heavy_ship = 0.1
						light_ship = 0.5
						transport = 0.4
					}
				}
			}
		}
	}
}