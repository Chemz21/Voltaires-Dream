#feudalization
#court stuff

byzantine_succession_mechanic = {
	alert_icon_gfx = GFX_alerticons_government_mechanics
	alert_icon_index = 10
	available = { }
	
	interactions = {
		byz_succession_bureaucracy = {
			icon = GFX_succession_bureaucracy_button
			trigger = {
				ruler_age = 40
				OR = {
					monthly_adm = 10 
					adm = 5 
					national_focus = ADM
				}
				adm_power_cost = 50
			}
			effect = {
				adm_power_cost = 50
				custom_tooltip = byz_succession_bureaucracy.tt
				if = {
					limit = {
						has_estate = estate_nobles
						has_estate = estate_eunuchs
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = -10
					}
					add_estate_loyalty = {
						estate = estate_eunuchs
						loyalty = 10
					}
					add_estate_influence_modifier = {
						estate = estate_eunuchs
						influence = 15
						duration = 3650
					}
				}
				hidden_effect = {
					define_heir = {
						age = 30
						change_adm = 2
						claim = 50
						no_consort_with_heir = yes
					}
				}
				add_ruler_modifier = {
					name = byz_succession_bureaucracy_mod
					duration = 3650
				}
			}
			cooldown_years = 10
			cooldown_token = byzantine_succession_mechanic
			cooldown_desc = BYZANTINE_SUCCESSION_HAPPENED
			ai_chance = {
				factor = 20
			}
		}
		byz_succession_dynasty = {
			icon = GFX_succession_dynasty_button
			trigger = { 
				ruler_age = 40
				OR = {
					monthly_dip = 10 
					dip = 5 
					national_focus = DIP
				}
				dip_power_cost = 50
			}
			effect = { 
				dip_power_cost = 50
				custom_tooltip = byz_succession_dynasty.tt
				if = {
					limit = {
						has_estate = estate_nobles
						has_estate = estate_eunuchs
					}
					add_estate_loyalty = {
						estate = estate_eunuchs
						loyalty = -5
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = -5
					}
					add_estate_influence_modifier = {
						estate = estate_eunuchs
						influence = -10
						duration = 3650
					}
					add_estate_influence_modifier = {
						estate = estate_nobles
						influence = -10
						duration = 3650
					}
				}
				hidden_effect = {
					define_heir = {
						dynasty = ROOT
						age = 30
						change_dip = 2
						claim = 50
						no_consort_with_heir = yes
					}
				}
				add_ruler_modifier = {
					name = byz_succession_dynasty_mod
					duration = 3650
				}
			}
			cooldown_years = 10
			cooldown_token = byzantine_succession_mechanic
			cooldown_desc = BYZANTINE_SUCCESSION_HAPPENED
			ai_chance = {
				factor = 20
			}
		}
		byz_succession_army = {
			icon = GFX_succession_army_button
			trigger = {
				ruler_age = 40
				OR = {
					monthly_mil = 10 
					mil = 5 
					national_focus = MIL
				}
				mil_power_cost = 50
			}
			effect = { 
				mil_power_cost = 50
				custom_tooltip = byz_succession_army.tt
				if = {
					limit = {
						has_estate = estate_nobles
						has_estate = estate_eunuchs
					}
					add_estate_loyalty = {
						estate = estate_eunuchs
						loyalty = -10
					}
					add_estate_loyalty = {
						estate = estate_nobles
						loyalty = 10
					}
					add_estate_influence_modifier = {
						estate = estate_nobles
						influence = 15
						duration = 3650
					}
				}
				hidden_effect = {
					hidden_effect = {
						define_heir = {
							age = 30
							change_mil = 2
							claim = 50
							no_consort_with_heir = yes
						}
					}
				}
				add_ruler_modifier = {
					name = byz_succession_army_mod
					duration = 3650
				}
			}
			cooldown_years = 10
			cooldown_token = byzantine_succession_mechanic
			cooldown_desc = BYZANTINE_SUCCESSION_HAPPENED
			ai_chance = {
				factor = 20
			}
		}
	}
}

# byzantine_pronoia_mechanic = {
# 	alert_icon_gfx = GFX_alerticons_government_mechanics
# 	alert_icon_index = 4
# 	available = { }

# 	interactions = {
# 		efficient_tax_farming = {
# 			icon = GFX_efficient_tax_farming_button
# 			trigger = {
# 			}
# 			effect = {
# 				add_country_modifier = {
# 					name = efficient_tax_farming_modifier
# 					duration = 7300
# 				}
# 				add_subjects_development_ducats = {
# 					multiplier = 2
# 				}
# 			}
# 			cooldown_years = 20
# 			cooldown_token = iqta_mechanic
# 			cooldown_desc = AN_IQTA_TAXATION_POLICY
# 			ai_chance = {
# 				factor = 20
# 				modifier = {
# 					factor = 0
# 					NOT = { num_of_loans = 1 }
# 				}
# 				modifier = {
# 					factor = 0.5
# 					is_in_deficit = no
# 				}
# 				modifier = {
# 					factor = 1.25
# 					has_any_disaster = yes
# 				}
# 				modifier = {
# 					factor = 1.5
# 					num_of_loans = 2
# 					is_in_deficit = yes
# 				}
# 				modifier = {
# 					factor = 20
# 					num_of_loans = 1
# 				}
# 				modifier = {
# 					factor = 100
# 					num_of_loans = 3
# 				}
# 				modifier = {
# 					factor = 100
# 					num_of_loans = 5
# 				}
# 				modifier = {
# 					factor = 100
# 					num_of_loans = 7
# 				}

# 			}
# 		}
# 		land_acquisition = {
# 			icon = GFX_land_acquisition_button
# 			trigger = { 
# 			}
# 			effect = { 
# 				add_country_modifier = {
# 					name = land_acquisition_modifier
# 					duration = 7300
# 				}
# 				add_subjects_development_manpower = {
# 					multiplier = 0.05
# 				}
# 			}
# 			cooldown_years = 20
# 			cooldown_token = iqta_mechanic
# 			cooldown_desc = AN_IQTA_TAXATION_POLICY
# 			ai_chance = {
# 				factor = 20
# 				modifier = {
# 					factor = 20
# 					not = { manpower_percentage = 0.3 }
# 				}
# 				modifier = {
# 					factor = 20
# 					not = { manpower_percentage = 0.2 }
# 				}
# 				modifier = {
# 					factor = 20
# 					not = { manpower_percentage = 0.1 }
# 				}
# 				modifier = {
# 					factor = 100
# 					is_in_important_war = yes
# 				}
# 				modifier = {
# 					factor = 30
# 					is_at_war = yes
# 					is_in_deficit = no
# 				}
# 				modifier = {
# 					factor = 0
# 					is_at_war = no
# 					OR = {
# 						NOT = {
# 							any_neighbor_country = {
# 								NOT = { truce_with = ROOT }
# 							}
# 						}
# 						manpower_percentage = 0.9
# 					}
# 				}
# 			}
# 		}
# 		lenient_taxation = {
# 			icon = GFX_lenient_taxation_button
# 			trigger = {
# 			}
# 			effect = { 
# 				add_country_modifier = {
# 					name = lenient_taxation_modifier
# 					duration = 7300
# 				}
# 			}
# 			cooldown_years = 20
# 			cooldown_token = iqta_mechanic
# 			cooldown_desc = AN_IQTA_TAXATION_POLICY
# 			ai_chance = {
# 				factor = 10
# 				modifier = {
# 					factor = 0
# 					NOT = {
# 						any_subject_country = {
# 							liberty_desire = 40
# 						}
# 					}
# 				}
# 				modifier = {
# 					factor = 20
# 					any_subject_country = {
# 						liberty_desire = 45
# 					}
# 				}
# 				modifier = {
# 					factor = 50
# 					any_subject_country = {
# 						liberty_desire = 50
# 					}
# 				}
# 				modifier = {
# 					factor = 100
# 					any_subject_country = {
# 						liberty_desire = 60
# 					}
# 				}
# 			}
# 		}
# 	}
# }